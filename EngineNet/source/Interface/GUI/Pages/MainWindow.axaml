<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="EngineNet.Interface.GUI.Pages.MainWindow"
    Width="1000" Height="700" Title="EngineNet">
    <Grid>
        <DockPanel>
            <!-- top nav -->
            <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Spacing="8" Margin="8">
                <Button Content="Library" Click="OnLibrary"/>
                <Button Content="Store"   Click="OnStore"/>
                <Button Content="Building" Click="OnBuilding"/>
                <Button Content="Settings" Click="OnSettings"/>
            </StackPanel>

            <!-- bottom compact building indicator -->
            <Border x:Name="BottomPanel"
                    DockPanel.Dock="Bottom"
                    BorderThickness="1"
                    BorderBrush="#3A3A3A"
                    Background="#101010"
                    Padding="8"
                    Margin="8,0,8,8"
                    CornerRadius="6">
                <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                    <TextBlock Grid.Column="0" Grid.Row="0" Text="Building:" Foreground="LightGray" Margin="0,0,8,0"/>
                    <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding ProgressSummaryLine, TargetNullValue=Working...}" Foreground="White"/>
                    <Button   Grid.Column="2" Grid.Row="0" x:Name="BottomExpandButton" Content="Expand" Click="OnBuilding"/>
                    <ProgressBar Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1" Height="8" Minimum="0" Maximum="1" Value="{Binding ProgressPercent}"/>
                </Grid>
            </Border>

            <!-- page host -->
            <ContentControl x:Name="ContentHost" Margin="8"/>
        </DockPanel>

        <!-- Prompt Overlay -->
        <Border x:Name="PromptOverlay" Background="#AA000000" IsVisible="{Binding IsPromptActive}">
            <Border Background="#202020" BorderBrush="#404040" BorderThickness="1" CornerRadius="8"
                    HorizontalAlignment="Center" VerticalAlignment="Center" Padding="16" MinWidth="300" MaxWidth="500">
                <StackPanel Spacing="12">
                    <TextBlock Text="{Binding PromptTitle}" FontWeight="Bold" FontSize="16" Foreground="White"/>
                    <TextBlock Text="{Binding PromptMessage}" TextWrapping="Wrap" Foreground="#D0D0D0"/>
                    
                    <TextBox Text="{Binding PromptValue}" IsVisible="{Binding IsTextPrompt}" />

                    <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                        <Button Content="Cancel" Click="OnPromptCancel" />
                        <Button Content="OK" Click="OnPromptSubmit" IsDefault="True"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</Window>
